<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<title>patch for qmail</title>
<meta http-equiv="content-type" content="text/html;charset=iso-2022-jp">
<meta http-equiv="content-style-type" content="text/css">
<link rev="made" href="mailto:taki@cyber.email.ne.jp">
<link rel="stylesheet" href="../djb.css">
</head>
<body lang="ja">
<h1>qmail とパッチ</h1>
<h2>アンケート</h2>
<p>1998年5月6日初出、1999年4月10日更新</p>
<hr>
<h3>qmailのパッチについてのアンケート</h3>
<p>「qmailのパッチについて」のアンケートを日本のqmailのメイリングリスト
<a href="http://www.jp.qmail.org/ml/index.html">qmail@jp.qmail.org</a>
で行いました。</p>
<dl>
<dt>アンケートの期間<dd>1998年 3月12日〜27日
<dt>回答数<dd>30 人
<dt>質問内容<dd>
  <ol>
  <li>パッチを当てているか当てていないか？
  <li>どういう理由で？
  </ol>
</dl>

<hr>
<h3>アンケートの結果</h3>
<ol>
<li>パッチを当てているか当てていないか？
<ul type="square">
<li>パッチの有無
<table border>
<tr><td>当てている<td>20 人</tr>
<tr><td>当てていない<td>10 人</tr>
</table>

<li>当てているパッチと人数
<table border>
<tr><th>作者名:パッチの目的<br>
        パッチの所在
    <th>人数
</tr>
<tr><td>John Saunders: ローカルタイム表示<br>
        ftp://ftp.nlc.net.au/pub/unix/mail/qmail/qmail-date-localtime.patch<br>
        [1.03]date822fmt.cには変更がない。
    <td align="right">17
</tr>
<tr><td>John Saunders: qmail-smtpdが\nで終了する行を受け付けるパッチ<br>
        ftp://ftp.nlc.net.au/pub/linux/mail/qmail/qmail-smtpd-newline.patch<br>
        [1.03]対応<br>
        [別手段]ucspi-tcp パッケージの fixcr を使う。
    <td align="right">7
</tr>
<tr><td>Bart Hartgers and Franz Sirl: STATUSなどのヘッダーを挿入するパッチ<br>
        http://homepages.munich.netsurf.de/Franz.Sirl/qmail-pop3d.diff<br>
        [1.03]http://homepages.munich.netsurf.de/Franz.Sirl/qmail-pop3d-1.03.diff
    <td align="right">4
</tr>
<tr><td>Russ Nelson: MAPS RBLプロジェクトのパッチ<br>
        http://www.jp.qmail.org/qmail/rbl/qmail-1.01-rbl.diffs<br>
        [1.03]http://www.jp.qmail.org/qmail/rbl/qmail-1.03-rbl.diffs<br>
        [別手段]rblsmtpd パッケージを使う。
    <td align="right">4
</tr>
<tr><td>電信八号等MUA対策<br>
        [1.03]HELO の後の multiline replies に対するパッチは必要なくなった。
    <td align="right">4
</tr>
<tr><td>Chuck Foster: "CNAME lookup failed"を受け付けるパッチ<br>
        http://www.jp.qmail.org/qmail/cname_lookup_failed<br>
        [1.03]CNAME lookup をやめたため必要無くなった。
    <td align="right">3
</tr>
<tr><td>Michael Samuel: RCPT TO の数を制限するパッチ<br>
        ftp://ftp.surfnetcity.com.au/pub/unix/qmail/qmail-1.01-maxrcpt.patch<br>
        [1.03]不明
    <td align="right">3
</tr>
<tr><td>Rask Ingemann Lambertsen: qmail-smtpdが\nで終了する行を受け付けるパッチ<br>
        http://www.gbar.dtu.dk/~c948374/qmail/qmail-bare-lf.diff<br>
        [1.03]不明<br>
        [別手段]ucspi-tcp パッケージの fixcr を使う。
    <td align="right">3
</tr>
<tr><td>Richard Letts: qmail-sendがSIGHUPしたときrecipientmapを再読み込みするパッチ<br>
        http://www.illuin.demon.co.uk/qmail/recipientmap-reload-0.6.patch<br>
        [1.03]control/recipientmap自体がなくなった。
    <td align="right">3
</tr>
<tr><td>Mark Delany: senderをチェックするspam対策のパッチ<br>
        ftp://ftp.mira.net/unix/mail/qmail/wildmat-0.2.patch<br>
        [1.03]不明
    <td align="right">3
</tr>
<tr><td>Bert Gijsbers: APOPのサポートをするためのパッチ<br>
        bert-send-apop@mc.bio.uva.nl へメイルを送って返送されたqmapop-0.3.tar.gz<br>
        [1.03]qmail-1.02-popup.c.diffあり。See ML:qmail@jp.qmail.org #714
    <td align="right">2
</tr>
<tr><td>Sam Varshavchik: procmail-during-SMTP antispam patch<br>
        http://www.geocities.com/SiliconValley/Peaks/5799/qmail-uce.html
        [1.03]対応
    <td align="right">2
</tr>
<tr><td>Frank D. Cringle: /var/qmail/queue/lock/tcpto をリセットするパッチ<br>
        http://www.jp.qmail.org/qmail/qmail-del-tcpto<br>
        [1.03]qmail-tcpok が追加されたため必要無い。
    <td align="right">1
</tr>
<tr><td>Rask Ingemann Lambertsen: 中継を制御するqmail-smtpdへのパッチ<br>
        http://www.gbar.dtu.dk/~c948374/qmail/qmail-relayclient.diff
        [1.03]http://www.cs.uregina.ca/~wunschs/code/qmail-1.03-relayclient.diff
        [別手段]ucspi-tcp を使う。
    <td align="right">1
</tr>
<tr><td>IPv6対応
    <td align="right">1
</tr>
</table>
注）MUA対策とIPv6対応は手製のパッチです。<br>
なお、アンケートの回答には Russ Nelson作の MAPS RBLプロジェクトのパッチ http://www.jp.qmail.org/qmail/rbl/ucspi-tcp-0.80-rbl.diffs が含まれていますが、qmail ではなく tcpserver に対するパッチなので除外します。解答数は 3 です。<br>
上記のパッチは qmail 1.01 以前のパッチです。1.03 で対応状況は各欄の[1.03]という行に書いてあります。また、パッチを当てないで済む手段がある場合は[別手段]という行に書いてあります。<br>
上記のパッチのほとんどは<a href="http://www.jp.qmail.org/qmail/top.html">www.qmail.orgの日本のミラーサイト</a>からたどることができます。<br>
</ul>

<li>どういう理由で？<br>
コメントを簡潔にするため、送っていただいた理由の文章を一部変えたり、
同じ内容はまとめたりしています。
<ul type="square">

<li>パッチを当てない理由
<ul type="disc">
<li>特に当てる必要がない。
<li>オリジナルからの改変はしたくない。
<li>パッチの存在を知らなかった。
<li>勉強不足でそこまで手が回っていない。
<li>現在試験運用のため。
<li>当てる理由はあるが別の方法で逃げている。
<li>MUA に問題があれば, MUA で対処して頂く 等の方針を採用している。
</ul>

<li>パッチを当てる理由
<ul type="circle">
<li>qmail-date-localtime.patch
<ul type="disc">
<li>時刻の表示を localtime(JST) にしたかったから。
<li>JST の方が直感的にわかりやすい。
<li>配送状況を見やすくするため、他の MUA の表示と合わせたい。
<li>DateをつけないMUAがあり、Dateの表示が -0000 となることを防ぐ為。
</ul>

<li>qmail-smtpd-newline.patch
<ul type="disc">
<li>不具合のでるメーラーがあると聞いたので。
<li>RFCを守らないで実装されたMUA対策．
<li>winなクライアントから利用するのに必要だったため。
<li>改行が `LF' ではうまく動かないことがあった。
<li>行末処理(LF, LF+CR)
<li>ISP で利用している以上、利用者の MUA でメールを送信できないのは論外である。
</ul>

<li>qmail-pop3d.diff
<ul type="disc">
<li>不具合のでるメーラーがあると聞いたので。
<li>Authorized POP を導入する準備のため．まだ導入はしていません．
<li>単純に当てた方が良い気がした。
</ul>

<li>qmail-1.01-rbl.diffs
<ul type="disc">
<li>SPAM/UCE対策．
<li>不正中継関係で活用できそう。
<li>MAPS RBLプロジェクトの情報を利用するためです。
</ul>

<li>電信八号等MUA対策
<ul type="disc">
<li>winなクライアントから利用するのに必要だったため。
<li>電信八号がqmail-smtpdときちんとお話しできるようにする
<li>ISP で利用している以上、利用者の MUA でメールを送信できないのは論外である。
</ul>
  参照）<br>
<a href="http://www.jp.qmail.org/client/broken-client.html">SMTPの実装に問題が報告されたクライアントの情報(前野さんのページ)</a><br>
<a href="../../win-mailer/index.html">Windows のメイラーの選定</a>
<li>cname_lookup_failed
<ul type="disc">
<li>大元のDNSが腐っているため．
<li>ある無料メーリングリストサーバからのメールがこのチェックに引っかかって配信されない。
</ul>

<li>qmail-1.01-maxrcpt.patch
<ul type="disc">
<li>一度に RCPT できる宛先の数を制限できるようにすれば後々便利だと
思ったため．実行はしてませんが．
</ul>

<li>qmail-bare-lf.diff
<ul type="disc">
<li>RFCを守らないで実装されたMUA対策．
</ul>

<li>recipientmap-reload-0.6.patch, wildmat-0.2.patch
<ul type="disc">
<li>SPAM/UCE対策．
<li>不正中継関係で活用できそう。
</ul>

<li>qmapop-0.3
<ul type="disc">
<li>APOPのため
</ul>

<li>qmail-uce.tgz
<ul type="disc">
<li>UCE 対策。
</ul>

<li>qmail-del-tcpto, qmail-relayclient-diff
<ul type="disc">
<li>不正中継関係で活用できそう。
</ul>

<li>IPv6対応
<ul type="disc">
<li>tcp-envでIPv6アドレスへの対応、qmail-remoteでIPv6先へのsend
</ul>

</ul>
</ul>
</ol>

<hr>
<p>
<a href="index.html">目次</a>
</p>
</body>
</html>
