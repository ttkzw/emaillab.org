<?xml version="1.0" encoding="iso-2022-jp"?>
<!DOCTYPE html 
  PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="ja" lang="ja">
<head>
<meta http-equiv="content-type" content="text/html;charset=iso-2022-jp" />
<meta http-equiv="content-style-type" content="text/css" />
<title>checkpassword extention</title>
<link rev="made" href="mailto:taki@cyber.email.ne.jp" />
<link rel="stylesheet" href="vida.css" />
<body>
<h1>checkpassword の拡張機能</h1>
<p>checkpasswordがqmail-vidaパッケージにより拡張された機能を示す。</p>

<h2>認証方式</h2>
<p>平文認証だけでなく、APOPとCRAM-MD5による認証が利用可能である。</p>

<h2>対象とするデーモン</h2>
<p>qmail-pop3d と qmail-smtpd</p>

<h2>パスワードデータベース</h2>
<p>デフォルトでは/etc/passwdを利用せず、独自のパスワードデータベースを利用している。このデータベースの形式は CDB であるため、ユーザ数が多くなっても非常に高速に認証を行うことができる。</p>
<p>実在ユーザの場合に平文認証に/etc/passwdを利用したい場合はコンパイル前にファイル conf-withpasswd の内容を "1" に書き換える必要がある。ただし、パスワードデータベースにエントリーがあるユーザの場合には/etc/passwdを参照しない。このとき、conf-blockuid に記述されたUID以下のユーザに関しては認証を行なわないため、conf-blockuid も必要に応じて修正する。デフォルトでは UID が 10 以下のユーザは認証を行なわない。なお、現状では PAM 認証に対応していない。</p>

<h2>仮想メールボックス</h2>
<p>仮想メールボックスにアクセスできる機能が用意されている。</p>

<h2>バーチャルドメイン</h2>
<p>IPアドレスベースおよびログインIDベースのバーチャルドメインのユーザの認証を行える。</p>

<h2>環境変数</h2>
<h3>DOMAINOWNER</h3>
<p>環境変数 DOMAINOWNER にはドメインを所有・管理するユーザを記述する。実在ドメインの場合は省略可能である。</p>
<p>ログインIDベースのバーチャルドメインを運用する場合には環境変数 DOMAINOWNER に空の値を設定する。</p>

<h3>DOMAINDELIMITERS</h3>
<p>ログインIDベースのバーチャルドメインを運用する場合にはログインIDのユーザ部とドメイン部のデリミタとして環境変数 DOMAINDELIMITERS に設定した文字を利用する。デフォルトでは"@%"が設定されている。</p>

</body>
</html>
