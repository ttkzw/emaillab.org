<?xml version="1.0" encoding="iso-2022-jp"?>
<!DOCTYPE html 
  PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="ja" lang="ja">
<head>
<meta http-equiv="content-type" content="text/html;charset=iso-2022-jp" />
<meta http-equiv="content-style-type" content="text/css" />
<title>vida-pwdbmake</title>
<link rev="made" href="mailto:taki@cyber.email.ne.jp" />
<link rel="stylesheet" href="vida.css" />
<body>
<h1>vida-pwdbmake</h1>
<p>パスワードデータベースを更新するプログラム</p>

<h2>使い方</h2>
<p>vida-pwdbmake [-r]</p>

<p>このコマンドを実行するとパスワードデータベースを更新する。ドメインの所有者が実行した場合は、そのドメイン用のパスワードデータベースが更新され、一般ユーザが実行した場合は、実在ユーザ用のパスワードデータベースが更新される。なお、ドメインの所有者が実行した場合でも-rオプションを付けた場合は実在ユーザ用のパスワードデータベースが更新される。
</p>

<h2>説明</h2>
<p>パスワードデータベースにはCDBを用いているため、auth/*/passwdというファイルにパスワードエントリを記述した後に、auth/*/cdbにコンパイルしている。このコンパイルを行うコマンドがvida-pwdbmakeである。通常はvida-passwdから呼び出して使われるため、このコマンドを直に実行することはない。しかし、複数のユーザを同時に登録したりする場合などに、ユーザを追加する度にvida-pwdbmakeを実行するのは無駄なので、vida-passwdではvida-pwdbmakeを実行しないオプション-Mを用意している。この場合はユーザを登録し終わった後にvida-pwdbmakeを実行する必要がある。
</p>

<h2>形式</h2>
<p>authdb/*/passwd の形式は次の通りである。</p>
<pre class="example">
user&lt;tab&gt;password&lt;tab&gt;variables
</pre>
<p>userとpasswordはそれぞれユーザ名とパスワードである。variablesは認証後に設定される環境変数を設定する式であり、ucspi-tcpパッケージのtcprulesにおける環境変数の記述法と同じ形式である。つまり、NAME="VALUE"の形式で記述し、複数個を記述するときは','で区切って並べる。記述例を次に示す。</p>
<pre class="example">
foo     secret  TEMPRELAYCLIENT="@fixme"
</pre>
<p>なお、行頭が'#'あるいは改行のみの場合は無視される。</p>


</body>
</html>
