<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN">
<html>
<head>
<title>tcpserver</title>
<meta http-equiv="content-type" content="text/html;charset=iso-2022-jp">
<meta http-equiv="content-style-type" content="text/css">
<link rev="made" href="mailto:taki@cyber.email.ne.jp">
<link rel="stylesheet" href="../../taki.css">
</head>
<body lang="ja">
<h1>tcpserver</h1>
<h2>接続制御データベース</h2>
<h3>データベースの作成方法</h3>
<p>接続制御データベースの作成には <a href="http://cr.yp.to/ucspi-tcp/tcprules.html">tcprules</a>(<a href="http://www.ne.jp/asahi/cyber/taki/djb/tools/ucspi-tcp/tcprules.html">日本語訳</a>) を使います。</p>

<h3>データベースの作成例</h3>
<ol>
<li>データベースを作成するために次の形式のファイルを作成します。<br>
IPアドレス:制御
<li>次のようなファイルを作成します。
<ul>
<li>特定のユーザ、ホストからのみ ftp を許可したい。
<pre>
$ cat /service/ftpd/tcp

foo@1.2.3.7:allow
1.2.3.6:allow
1.2.4.:allow
:deny
</pre>
(ユーザ名が foo ,IPアドレスが 1.2.3.7 のホスト及びIPアドレスが 1.2.3.6 と 1.2.4.* であるホストからは接続を許可し、他のホストからは接続を拒否します。)
<li>特定のホストからの smtp の接続に対して環境変数を設定したい。
<pre>
$ cat /service/smtpd/tcp

1.2.3.6:allow,RELAYCLIENT=""
127.:allow,RELAYCLIENT=""
</pre>
(IPアドレスが1.2.3.6と127.*であるホストからの接続に対しては環境変数 RELAYCLIENT="" を設定して接続を許可し、他のホストからは環境変数を設定せずに接続を許可します。)
</ul>
<li>以上のファイルをcdb形式に変換します。
<pre>
$ cd /service/ftpd
# /usr/local/bin/tcprules tcp.cdb tcp.tmp &lt; tcp
$ cd /service/smtpd
# /usr/local/bin/tcprules tcp.cdb tcp.tmp &lt; tcp

</pre>
</ol>

<hr>
<p>
<a href="index.html">目次</a> - 
<a href="whatis.html">tcpserver とは</a> - 
<a href="install.html">インストール</a> - 
<strong>接続制御データベース</strong> - 
<a href="environ.html">環境変数</a> - 
<a href="options.html">オプション</a> - 
<a href="start.html">起動例</a> - 
<a href="tips.html">TIPS</a> - 
<a href="tcpanalog.html">tcpanalog</a>
</p>
</body>
</html>
