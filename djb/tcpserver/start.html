<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN">
<html>
<head>
<title>tcpserver - startup</title>
<meta http-equiv="content-type" content="text/html;charset=iso-2022-jp">
<meta http-equiv="content-style-type" content="text/css">
<link rev="made" href="mailto:taki@cyber.email.ne.jp">
<link rel="stylesheet" href="../../taki.css">
</head>
<body lang="ja">
<h1>tcpserver</h1>
<h2>起動例</h2>
<p>1999年9月25日更新</p>
<hr>
<h3>ログを出力しない場合</h3>
<p>identd のように接続制御を必要とせず、またログをとる必要のない場合の起動スクリプトを示します。この例では同時接続数は 40 までであり、identd がむやみにたくさん起動するのを防ぐことができます。また、IDENT のピンポンを防ぐために IDENT を行わないように -R オプションを付けます。</p>
<pre>
#!/bin/sh
#  identd
/usr/local/bin/tcpserver -HR -c 40 -u 0 -g 0 0 auth \
/usr/sbin/in.identd -w -t120 -l &amp;
</pre>

<hr>
<h3>ログを出力する場合（sploggerを使用）</h3>
<p>qmail の SMTP デーモン qmail-smtpd の接続制御を行い、qmail のパッケージに含まれている <a href="../qmail/splogger.html">splogger</a> にログを出力する場合の起動スクリプトを示します。</p>
<pre>
#!/bin/sh
#  qmail-smtpd
exec env - PATH=/var/qmail/bin:/usr/local/bin \
tcpserver -v -c 40 -x /etc/tcp.smtp.cdb -u 7791 -g 2108 0 smtp \
qmail-smtpd 2&gt;&amp;1 | splogger smtpd 4 &amp;
</pre>
<p>なお、予め syslog.conf を編集して auth レベルのログの出力を /var/log/auth, /var/log/authlog などにするようにしておきます。</p>

<hr>
<h3>ログを出力する場合（multilog を使用）</h3>
<p>qmail の SMTP デーモン qmail-smtpd の接続制御を行い、daemontools に含まれている multilog にログを出力する場合の起動スクリプトを示します。詳しくは <a href="../daemontools/start.html">daemontools</a> のページを見てください。</p>
<pre>
#!/bin/sh
#  qmail-smtpd
exec env -PATH="/var/qmail/bin:$PATH" \
tcpserver -v -c 40 -x /etc/tcp.smtp.cdb -u 7791 -g 2108 0 smtp qmail-smtpd 2&gt;&amp;1
</pre>

<hr>
<p>
<a href="index.html">目次</a> - 
<a href="whatis.html">tcpserver とは</a> - 
<a href="install.html">インストール</a> - 
<a href="database.html">接続制御データベース</a> - 
<a href="environ.html">環境変数</a> - 
<a href="options.html">オプション</a> - 
<strong>起動例</strong> - 
<a href="tips.html">TIPS</a> - 
<a href="tcpanalog.html">tcpanalog</a>
</p>
</body>
</html>
