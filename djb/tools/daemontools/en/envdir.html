<html>
<body>
<a href="../djb.html">D. J. Bernstein</a>
<br><a href="../unix.html">UNIX</a>
<br><a href="../daemontools.html">daemontools</a>
<h1>The envdir program</h1>
<tt>envdir</tt>
runs another program
with environment modified according to files in a specified directory.
<h2>Interface</h2>
<pre>
     envdir <i>d</i> <i>child</i>
</pre>
<tt><i>d</i></tt>
is a single argument.
<tt><i>child</i></tt>
consists of one or more arguments.
<p>
<tt>envdir</tt>
sets various environment variables as specified by files
in the directory named <tt><i>d</i></tt>.
It then runs <tt><i>child</i></tt>.
<p>
If <tt><i>d</i></tt> contains a file named <tt><i>s</i></tt>
whose first line is <tt><i>t</i></tt>,
<tt>envdir</tt>
removes an environment variable named <tt><i>s</i></tt> if one exists,
and then adds an environment variable named <tt><i>s</i></tt>
with value <tt><i>t</i></tt>.
The name <tt><i>s</i></tt> must not contain <tt>=</tt>.
Spaces and tabs at the end of <tt><i>t</i></tt> are removed.
Nulls in <tt><i>t</i></tt> are changed to newlines in the environment variable.
<p>
If the file <tt><i>s</i></tt> is completely empty (0 bytes long),
<tt>envdir</tt>
removes an environment variable named <tt><i>s</i></tt> if one exists,
without adding a new variable.
<p>
<tt>envdir</tt>
exits 111 if it has trouble reading <tt><i>d</i></tt>,
if it runs out of memory for environment variables,
or if it cannot run <tt><i>child</i></tt>.
Otherwise its exit code is the same as that of <tt><i>child</i></tt>.
</body>
</html>
