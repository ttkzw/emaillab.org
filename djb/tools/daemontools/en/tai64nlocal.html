<html>
<body>
<a href="../djb.html">D. J. Bernstein</a>
<br><a href="../unix.html">UNIX</a>
<br><a href="../daemontools.html">daemontools</a>
<h1>The tai64nlocal program</h1>
<tt>tai64nlocal</tt>
converts precise TAI64N timestamps
to a human-readable format.
<h2>Interface</h2>
<tt>tai64nlocal</tt>
reads lines from stdin.
If a line does not begin with @,
<tt>tai64nlocal</tt> writes it to stdout without change.
If a line begins with @,
<tt>tai64nlocal</tt> looks for a timestamp after the @,
in the format printed by
<a href="tai64n.html">tai64n</a>,
and writes the line to stdout
with the timestamp converted to local time in ISO format:
YYYY-MM-DD HH:MM:SS.SSSSSSSSS.
<p>
For example, in the US/Pacific time zone, the input line
<pre>
     @4000000037c219bf2ef02e94 mark
</pre>
should be printed as
<pre>
     1999-08-23 21:03:43.787492500 mark
</pre>
Beware, however, that
the current implementation of
<tt>tai64nlocal</tt>
relies on the UNIX <tt>localtime</tt> library routine
to find the local time.
Some <tt>localtime</tt> implementations
use a broken time scale that does not account for leap seconds.
On systems that use the Olson tz library
(with an up-to-date leap-second table),
you can fix this problem 
by setting your time zone to, e.g, <tt>right/US/Pacific</tt>
instead of <tt>US/Pacific</tt>.
<p>
Beware also that most <tt>localtime</tt> implementations
are not Y2038-compliant.
<p>
<tt>tai64nlocal</tt>
exits 0 when it sees end of input.
It exits 111 without an error message
if it has trouble reading stdin
or writing stdout.
<p>
<tt>tai64nlocal</tt>
does not allocate any memory after it starts,
except possibly inside <tt>localtime</tt>.
</body>
</html>
