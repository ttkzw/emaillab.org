<html lang="ja">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-2022-jp">
<title>The tai64n program</title>
</head>
<body>
<a href="http://cr.yp.to/djb.html">D. J. Bernstein</a>
<br><a href="http://cr.yp.to/unix.html">UNIX</a>
<br><a href="top.html">daemontools</a>
<h1><a href="http://cr.yp.to/daemontools/tai64n.html">tai64n プログラム</a></h1>
<tt>tai64n</tt>
<tt>tai64n</tt> は各行に正確なタイムスタンプを付けます。

<h2>使い方</h2>
<tt>tai64n</tt> は標準入力から行を読み、各行に対して、次のものを標準出力に書き出します。
<ol>
<li>@
<li>正確なタイムスタンプ
<li>スペース
<li>入力行のコピー
</ol>
そのタイムスタンプは <tt>tai64n</tt> が行の最初の文字を読んだ時間を示します。

<p>
入力が終りに達したら、<tt>tai64n</tt> はコード 0 で終了します。
標準入力から読んだり、標準出力へ書いたりするときに問題が生じたら、エラーメッセージを出力せずにコード 111 で終了します。

<p>
<tt>tai64n</tt> は起動後に一切メモリを割り当てません。

<h2>タイムスタンプ</h2>
<tt>tai64n</tt> によって使われるタイムスタンプは <a href="http://cr.yp.to/libtai/tai64.html#tai64n">外部 TAI64N 形式</a> における 12 バイトの TAI64N 符号です。
これは 24 桁の小文字の16進数として出力されます。
<a href="tai64nlocal.html">tai64nlocal</a> を使って、そのタイムスタンプを人が読める形式に変換できます。

<p>
例えば、タイムスタンプ 4000000037c219bf2ef02e94 は起源 1970 TAI からちょうど 935467455.787492500 秒経過したナノ秒を示します。
16進数 37c219bf は 935467455 であり、16進数 2ef02e94 は 787492500 です。

<p>
<tt>tai64n</tt> の現在の実装は 1970-01-01 00:00:10 TAI から経過した TAI の秒数のような現在の時間を返す UNIX の <tt>gettimeofday</tt> ライブラリ・ルーチンに依存します。
大抵の <tt>gettimeofday</tt> の実装は 2038 年には対応してないことに気をつけてください。
さらに、大抵の時計は正確に設定されていません。

<hr>
訳：滝澤 隆史<br>
<!-- hhmts start -->
Last modified: Wed Apr 19 14:08:29 2000
<!-- hhmts end -->
</body>
</html>
