<html>
<body>
<a href="djb.html">D. J. Bernstein</a>
<br><a href="tcpip.html">TCP/IP</a>
<h1>ucspi-tcp</h1>
<a href="ucspi-tcp/install.html">How to install ucspi-tcp</a>
<br><a href="ucspi-tcp/upgrade.html">Upgrading from previous versions of ucspi-tcp</a>
<p>
<a href="ucspi-tcp/tcpserver.html">The <tt>tcpserver</tt> program</a>
<br><a href="ucspi-tcp/tcprules.html">The <tt>tcprules</tt> program</a>
<br><a href="ucspi-tcp/tcprulescheck.html">The <tt>tcprulescheck</tt> program</a>
<br><a href="ucspi-tcp/argv0.html">The <tt>argv0</tt> program</a>
<br><a href="ucspi-tcp/fixcrio.html">The <tt>fixcrio</tt> program</a>
<br><a href="ucspi-tcp/recordio.html">The <tt>recordio</tt> program</a>
<br><a href="ucspi-tcp/rblsmtpd.html">The <tt>rblsmtpd</tt> program</a>
<p>
<a href="ucspi-tcp/tcpclient.html">The <tt>tcpclient</tt> program</a>
<br><a href="ucspi-tcp/who@.html">The <tt>who@</tt> program</a>
<br><a href="ucspi-tcp/date@.html">The <tt>date@</tt> program</a>
<br><a href="ucspi-tcp/finger@.html">The <tt>finger@</tt> program</a>
<br><a href="ucspi-tcp/http@.html">The <tt>http@</tt> program</a>
<br><a href="ucspi-tcp/tcpcat.html">The <tt>tcpcat</tt> program</a>
<br><a href="ucspi-tcp/mconnect.html">The <tt>mconnect</tt> program</a>
<br><a href="ucspi-tcp/addcr.html">The <tt>addcr</tt> and <tt>delcr</tt> programs</a>
<p>
<br><a href="ucspi-tcp/environment.html">TCP environment variables</a>
<hr>
<h2>What is it?</h2>
tcpserver and tcpclient are easy-to-use command-line tools for building
TCP client-server applications.
<p>
<b>tcpserver</b> waits for incoming connections and, for each connection, runs
a program of your choice. Your program receives environment variables
showing the local and remote host names, IP addresses, and port numbers.
<p>
tcpserver offers a concurrency limit to protect you from running out of
processes and memory. When you are handling 40 (by default) simultaneous
connections, tcpserver smoothly defers acceptance of new connections.
<p>
tcpserver also provides TCP access control features, similar to
tcp-wrappers/tcpd's hosts.allow but much faster. Its access control
rules are compiled into a hashed format with
<a href="cdb.html">cdb</a>,
so it can easily deal
with thousands of different hosts.
<p>
This package includes a recordio tool that monitors all the input and
output of a server.
<p>
<b>tcpclient</b> makes a TCP connection and runs a program of your choice. It
sets up the same environment variables as tcpserver.
<p>
This package includes several sample clients built on top of tcpclient:
who@, date@, finger@, http@, tcpcat, and mconnect.
<p>
tcpserver and tcpclient conform to
<a href="proto/ucspi.txt">UCSPI</a>,
the UNIX Client-Server Program Interface,
using the
<a href="proto/ucspi-tcp.txt">TCP</a>
protocol. UCSPI tools are available for several different networks.
<h2>Other command-line TCP tools</h2>
The current ucspi-tcp interface is a refinement of the
tcpserver/tcpclient interface in my 1991 clientserver package,
which replaced the attachport/authtcp interface in my 1989 auth package.
<p>
ucspi-tcp now competes with several other programs:
<ul>
<li>inetd, a root-only TCP server supplied by all UNIX vendors;
<li>xinetd, a replacement for inetd;
<li>the mconnect client supplied as part of SunOS;
<li>the
<a href="http://www.freebsd.org/cgi/pds.cgi?ports/sysutils/socket">socket</a>
program;
<li>faucet and hose,
part of the
<a href="http://web.purplefrog.com/~thoth/netpipes/">netpipes</a>
package; and
<li>the
<a href="http://www.avian.org/web1/hak/netcat.html">netcat</a>
program, which also supports UDP.
</ul>
<p>
Many sites are replacing inetd with tcpserver, for several reasons:
<ul>
<li>inetd is unreliable under high loads.
It cuts off service for 10 minutes
if it receives ``too many'' connections in 1 minute.
<li>inetd does not provide effective resource management.
It will happily
<a href="docs/inetd.html">use up all your memory</a>
if you are running a popular service.
<li>inetd has trouble with sudden bursts of activity.
Its listen() backlog is typically only 5 or 10 and cannot be raised.
</ul>
</body>
</html>
