<html lang="ja">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-2022-jp">
<title>The recordio program</title>
</head>
<body>
<a href="http://cr.yp.to/djb.html">D. J. Bernstein</a>
<br><a href="http://cr.yp.to/tcpip.html">TCP/IP</a>
<br><a href="top.html">ucspi-tcp</a>
<h1><a href="http://cr.yp.to/ucspi-tcp/recordio.html"><tt>recordio</tt> プログラム</a></h1>
<tt>recordio</tt> はプログラムの入出力を記録します。

<h2>使い方</h2>
<pre>
     recordio <i>prog</i>
</pre>
<tt>recordio</tt> は <tt><i>prog</i></tt> を起動します。
<tt><i>prog</i></tt> の入出力を示す行を記述子 2 に出力します。

<p>
<tt>recordio</tt> は記述子 2 の各行の始まりに入力には <tt>&lt;</tt> を、出力には <tt>&gt;</tt> を付けて、<tt><i>prog</i></tt> のプロセス ID を挿入します。
各行の終りには <tt>+</tt> や空白や <tt>[EOF]</tt> を挿入します。
空白は入力あるいは出力に改行があったことを示し、<tt>[EOF]</tt> は入力あるいは出力の終りを示します。

<p>
<tt>recordio</tt> は入出力の各パケットをすぐに出力します。
パケットを結合して行にまとめることはしません。
例えば、
<pre>
     recordio sh -c 'cat /dev/fd/8 2&gt;&amp;1' &gt; /dev/null
</pre>
は
<pre>
     5135 &gt; cat: /dev/fd/8: Bad file descriptor 
     5135 &gt; [EOF]
</pre>
あるいは <tt>cat</tt> プログラムが複数のパケットを出力すれば
<pre>
     5135 &gt; cat: +
     5135 &gt; /dev/fd/8+
     5135 &gt; : +
     5135 &gt; Bad file descriptor 
     5135 &gt; [EOF]
</pre>
を生成します。

<p>
<tt>recordio</tt> は長いパケットに対して複数行を使って、各行がアトミックに出力されることを保証します。

<p>
<tt>recordio</tt> は <tt><i>prog</i></tt> を子プロセスとして動作します。
<tt><i>prog</i></tt> の出力が終りに達したら終了します。

<hr>
訳：滝澤 隆史<br>
<!-- hhmts start -->
Last modified: Sat Mar 18 20:18:15 2000
<!-- hhmts end -->
</body>
</html>
