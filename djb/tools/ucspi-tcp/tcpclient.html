<html lang="ja">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-2022-jp">
<title>The tcpclient program</title>
</head>
<body>
<a href="http://cr.yp.to/djb.html">D. J. Bernstein</a>
<br><a href="http://cr.yp.to/tcpip.html">TCP/IP</a>
<br><a href="top.html">ucspi-tcp</a>
<h1><a href="http://cr.yp.to/ucspi-tcp/tcpclient.html"><tt>tcpclient</tt> プログラム</a></h1>
<tt>tcpclient</tt> は出ていく TCP 接続を生成します。

<h2>使い方</h2>
<pre>
     tcpclient <i>opts</i> <i>host</i> <i>port</i> <i>prog</i>
</pre>
<tt><i>opts</i></tt> は <tt>getopt</tt> 形式のオプション郡です。
<tt><i>host</i></tt> は一つの引数です。
<tt><i>port</i></tt> は一つの引数です。
<tt><i>prog</i></tt> は一つ以上の引数から成ります。

<p>
<tt>tcpclient</tt> は TCP サーバへ接続を試みます。
成功すれば、<tt><i>prog</i></tt> を起動します。
このとき、 記述子 6 でネットワークから読み込み、記述子 7 でネットワークへ書き出します。
いくつかの <a href="environment.html">環境変数</a> も設定します。

<p>
サーバのアドレスは <tt><i>host</i></tt> と <tt><i>port</i></tt> によって与えられます。
<tt><i>port</i></tt> は <tt>/etc/services</tt> での名前あるいは番号です。
<tt><i>host</i></tt> はローカルマシンを参照する 0 か、ドット付き10進表記 IP アドレスか、あるいはホスト名です。
ホスト名は <tt>dns_ip4_qualify</tt> を用いた <a href="http://djbdns.jp.qmail.org/djbdns/qualify.html">限定/修飾(qualification)</a> を通して与えられます。 

<p>
サーバが複数の IP アドレスを持っていれば、<tt>tcpclient</tt> は順番にそれぞれのアドレスを試します。

<h2>オプション</h2>
一般オプション:
<ul>
<li><tt>-q</tt>: 無言モード。エラーメッセージを出力しません。
<li><tt>-Q</tt>: (デフォルト)  エラーメッセージを出力します。
<li><tt>-v</tt>: 多言モード。エラーメッセージとステータスメッセージを出力します。
</ul>

接続オプション:
<ul>
<li><tt>-T <i>x</i>+<i>y</i></tt>:
<tt><tt><i>x</i>+<i>y</i></tt> 秒後に接続の試みを諦めます。
デフォルト: <tt>2+58</tt>。
ホストが複数の IP アドレスを持っている場合、<tt>tcpclient</tt> は一番目の IP アドレスに接続を試み、<tt><i>x</i></tt> 秒待ち、二番目の IP アドレスに接続を試み、<tt><i>x</i></tt> 秒待ち、と繰り返します。それから、タイムアウトしたそれぞれのアドレスを各アドレス毎に <tt><i>y</i></tt> 秒待って再び試みます。

二番目の試みをとばすために <tt>+<i>y</i></tt> を省いてもかまいません。
バージョン 0.88 より前では、<tt>tcpclient</tt><sub>(訳注を参照)</sub> は <tt><i>x</i></tt> (デフォルト: <tt>60</tt>) のみを用いています。 (訳注: 原文では <tt>tcpserver</tt> と記述されているが、文脈上 <tt>tcpclient</tt> の間違いと思われる) 

<li><tt>-i <i>localip</i></tt>:
接続のローカル側の IP アドレスとして <tt><i>localip</i></tt> を使います。
<tt><i>localip</i></tt> が利用できなければ終了します。
普通は <tt>tcpclient</tt> がオペレーションシステムにアドレスを選ばせます。

<li><tt>-p <i>localport</i></tt>:
接続のローカル側の TCP ポートとして <tt><i>localport</i></tt> を使います。
<tt><i>localport</i></tt> が利用できなければ終了します。
普通は <tt>tcpclient</tt> がオペレーションシステムにポートを選ばせます。

<li><tt>-d</tt>:
リモートホストの返答が遅いときにはデータ送信を遅らせます。
これは今のところデフォルトですが、今後はそうでないかもしれません。
遅らせたいのであれば、はっきりと設定してください。
     
<li><tt>-D</tt>: 
データ送信を遅らせません。<tt>TCP_NODELAY</tt> を有効にします。
</ul>

データ収集オプション:
<ul>
<li><tt>-h</tt>: (デフォルト)
環境変数 <tt>$TCPREMOTEHOST</tt> を設定するために DNS でリモートホスト名を調べます。

<li><tt>-H</tt>:
DNS でリモートホスト名を調べません。
環境変数 <tt>$TCPREMOTEHOST</tt> を取り除きます。

<li><tt>-l <i>localname</i></tt>:
DNS でローカルホスト名を調べません。
環境変数 <tt>$TCPLOCALHOST</tt> には <tt><i>localname</i></tt> を使います。
<tt><i>localname</i></tt> の共用選択(common choice)は <tt>0</tt> です。

<li><tt>-r</tt>: (デフォルト)
リモートホストから <tt>$TCPREMOTEINFO</tt> の取得を試みます。

<li><tt>-R</tt>:
リモートホストから <tt>$TCPREMOTEINFO</tt> の取得を試みません。

<li><tt>-t <i>n</i></tt>:
<tt><i>n</i></tt> 秒後に <tt>$TCPREMOTEINFO</tt> 接続の試みを諦めます。
デフォルト: 26。
</ul>

<hr>
訳：滝澤 隆史<br>
<!-- hhmts start -->
Last modified: Sun Nov 19 22:40:48 2000
<!-- hhmts end -->
</body>
</html>
